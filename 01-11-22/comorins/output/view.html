<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <h1 class="text-center">Resume</h1>
    <form>
      <label >Name:</label>   <label id="name"></label> <br>
      <label>Email:</label>   <label id="email"></label><br>
      <label>Phone:</label>   <label id="phone"></label><br>
      <label>Role:</label>    <label id="role"></label><br>
      <label>Objective:</label>   <label id="objective"></label><br>
      <h3>Skills:</h3>
        <ul id="skill_list"></ul><br>
      <h3>Education:</h3>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col" id="course-1">Course</th>
              <th scope="col" id="year-1">Year</th>
              <th scope="col" id="institute-1">Institute</th>
              <th scope="col" id="percentage-1">Percentage</th>
            </tr>
          </thead>
          <tbody id="education">      
          </tbody>
        </table>
      <h3>Certification:</h3>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Course Name</th>
              <th scope="col">Duration</th>
              <th scope="col">Institute</th>
            </tr>
          </thead>
          <tbody id="certificate">  
          </tbody>
        </table>
      <h3>Projects:</h3>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Title</th>
              <th scope="col">Abstract</th>
              <th scope="col">Year</th>        
            </tr>
          </thead>
          <tbody id="project">  
          </tbody>
        </table>
      <h3>Personal details:</h3>
        <p id="personal"></p>
      <h3>language known:</h3>
        <ul  id="language_knowns"></ul><br><br>
      <h3>Hobbies:</h3>
        <ul  id="hobbies"></ul><br><br>
      <h3>Declaration:</h3> <label id="declaration"></label> <br><br>        
    </form>
  </div>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script type="text/javascript">
      const queryString= window.location.search;
      const urlParams= new URLSearchParams(queryString);
      const product= urlParams.get('id');
    
      $(document).ready(function () {
        $.ajax({
          type:"get",
          url:"http://karka.academy/api/action.php",
          data:{
            request:"get_resume_by_id",
            user:"nithya",
            id:product
          },
          success: function (response) {
            let details=JSON.parse(response).data;

            let value = JSON.parse(details.data);
            console.log(value);
            $("#name").html(value.name);
            $("#email").html(value.email);
            $("#phone").html(value.phone);
            $("#role").html(value.role);
            $("#objective").html(value.objective);
            $("#declaration").html(value.declaration);

            let Skills=value.skills;
            for (let i = 0; i < Skills.length; i++) {
              let element=`<li>${Skills[i]}</li>`;
              $("#skill_list").append(element);
            }
            let Language=value.language_known;
            for (let i = 0; i < Language.length; i++) {
              let element=`<li>${Language[i]}</li>`;
              $("#language_knowns").append(element);
            }
            let Hobbies=value.Hobbies;
            for (let i = 0; i < Hobbies.length; i++) {
              let element=`<li>${Hobbies[i]}</li>`;
              $("#hobbies").append(element);
            }
            let Personal_details=value.Personal_details;
            console.log(Personal_details)
            let element=` <label>Address:  ${Personal_details.Address}</label> <br>
                          <label>Father Name:  ${Personal_details.fathername}</label><br>
                          <label>Mother Name:  ${Personal_details.mothername}</label><br>
                          <label>Marrital Status:  ${Personal_details.Marrital_Status}</label>
                          <br><label>Date of Birth:  ${Personal_details.DOB}</label><br>
                          <label>Gender:  ${Personal_details.Gender}</label><br><br>`;
                        $("#personal").html(element);
            let Education=value.education;
            // console.log(Education);
            for (let i = 0; i < Education.length; i++) {
              let element=`<tr>
              <th scope="row">${i+1}</th>
              <td>${Education[i].course}</td>
              <td>${Education[i].year}</td>
              <td>${Education[i].institute}</td>
              <td>${Education[i].percentage}</td>
            </tr>`
            $("#education").append(element);
              
            }
            let certification=value.certification;
            console.log(certification);
            for (let i = 0; i < certification.length; i++) {
              let element=`<tr>
              <th scope="row">${i+1}</th>
              <td>${certification[i].coursename}</td>
              <td>${certification[i].duration}</td>
              <td>${certification[i].institute}</td>
            </tr>`
            $("#certificate").append(element);
              
            }
            let projects=value.projects;
            console.log(projects);
            for (let i = 0; i < projects.length; i++) {
              let element=`<tr>
              <th scope="row">${i+1}</th>
              <td>${projects[i].title}</td>
              <td>${projects[i].abstract}</td>
              <td>${projects[i].year}</td>
            </tr>`
            $("#project").append(element);
              
            }
            

          }
        });
      });        
    </script>
</body>
</html>